<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLUS STORE | Moda & Estilo</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Raleway:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #000000;    /* Negro elegante */
            --accent: #D4AF37;     /* Dorado */
            --white: #ffffff;
            --light-gray: #f9f9f9;
            --text: #333333;
        }

        body { margin: 0; font-family: 'Raleway', sans-serif; color: var(--text); background: var(--white); }

        /* Navegaci√≥n */
        .navbar { background: var(--white); padding: 20px 0; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 1000; }
        .nav-container { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .logo { font-family: 'Playfair Display', serif; font-size: 1.8rem; letter-spacing: 2px; color: var(--primary); margin: 0; text-transform: uppercase; }
        .logo span { color: var(--accent); }
        .nav-links { list-style: none; display: flex; gap: 25px; padding: 0; margin: 0; }
        .nav-btn { background: none; border: none; font-size: 1.3rem; cursor: pointer; color: var(--primary); transition: 0.3s; }
        .nav-btn:hover { color: var(--accent); }

        /* Hero (Portada) */
        .hero { 
            /* Imagen de fondo de moda */
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1445205170230-053b83016050?auto=format&fit=crop&w=1600&q=80');
            background-size: cover; 
            background-position: center; 
            color: var(--white); 
            text-align: center; 
            padding: 120px 20px; 
        }
        .hero h2 { font-family: 'Playfair Display', serif; font-size: 3.5rem; margin: 0; letter-spacing: 1px; }
        .hero p { font-size: 1.2rem; margin-top: 10px; font-weight: 300; letter-spacing: 2px; }
        .btn-gold { background: var(--accent); color: var(--white); border: none; padding: 12px 35px; text-transform: uppercase; letter-spacing: 2px; font-size: 0.9rem; cursor: pointer; margin-top: 30px; text-decoration: none; display: inline-block; transition: 0.3s; }
        .btn-gold:hover { background: #b5952f; }

        /* Layout */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .section-title { text-align: center; font-family: 'Playfair Display', serif; font-size: 2.2rem; margin: 60px 0 40px; text-transform: uppercase; letter-spacing: 1px; }
        .section-title::after { content: ""; display: block; width: 60px; height: 3px; background: var(--accent); margin: 15px auto 0; }

        /* Productos (Dise√±o limpio y vertical) */
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 40px; margin-bottom: 60px; }
        .product-card { background: var(--white); transition: 0.3s; border: 1px solid #eee; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        
        .product-photo { width: 100%; height: 350px; object-fit: cover; } 
        
        .product-info { padding: 20px; text-align: center; }
        .product-name { font-size: 1.1rem; font-weight: 600; margin: 5px 0; font-family: 'Playfair Display', serif; }
        .price { font-size: 1.1rem; color: var(--text); font-weight: 300; margin-bottom: 15px; display: block; }
        
        .btn-buy { background: var(--primary); color: var(--white); border: none; padding: 12px; width: 100%; text-transform: uppercase; cursor: pointer; letter-spacing: 1px; font-size: 0.8rem; transition: 0.3s; }
        .btn-buy:hover { background: var(--accent); }
        
        .btn-delete { background: none; color: #999; border: 1px solid #ddd; padding: 5px 10px; cursor: pointer; font-size: 0.7rem; margin-top: 10px; }
        .btn-delete:hover { color: red; border-color: red; }

        /* Admin Panel */
        .admin-panel { background: #fdfdfd; padding: 40px; border: 1px solid #eee; margin-top: 20px; text-align: center; border-top: 3px solid var(--accent); }
        .admin-form input { padding: 12px; margin: 5px; width: 80%; max-width: 300px; border: 1px solid #ccc; font-family: inherit; }

        /* Modales */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; display: flex; justify-content: center; align-items: center; }
        .modal-content { background: var(--white); padding: 40px; width: 90%; max-width: 500px; position: relative; text-align: center; }
        .hidden { display: none !important; }
        .close { position: absolute; top: 10px; right: 20px; font-size: 2rem; cursor: pointer; }
        
        ul { list-style: none; padding: 0; margin: 20px 0; }
        li { padding: 15px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; font-size: 0.95rem; }

        /* Footer */
        footer { background: #111; color: #666; text-align: center; padding: 50px 20px; margin-top: 50px; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="container nav-container">
            <h1 class="logo">PLUS<span>STORE</span></h1>
            <ul class="nav-links">
                <li><button onclick="abrirCarrito()" class="nav-btn"><i class="fas fa-shopping-bag"></i> <span id="cart-count">0</span></button></li>
                <li><button onclick="abrirLogin()" class="nav-btn"><i class="fas fa-user"></i></button></li>
            </ul>
        </div>
    </nav>

    <header class="hero">
        <h2>Nueva Colecci√≥n</h2>
        <p>Elegancia en cada detalle</p>
        <a href="#catalogo" class="btn-gold">Ver Cat√°logo</a>
    </header>

    <div id="admin-panel" class="container admin-panel hidden">
        <h3 style="font-family: 'Playfair Display', serif;">Gesti√≥n de Boutique</h3>
        <p>A√±adir producto (Imagen menor de 1MB)</p>
        <form id="addProductForm" class="admin-form">
            <input type="file" id="newImg" accept="image/*" required style="background: white;"><br>
            <input type="text" id="newName" placeholder="Nombre (Ej: Reloj Dorado)" required><br>
            <input type="number" id="newPrice" placeholder="Precio (‚Ç¨)" required><br>
            <button type="submit" class="btn-gold">Publicar Producto</button>
        </form>
        <br>
        <button onclick="cerrarSesion()" style="border:none; background:none; text-decoration:underline; cursor:pointer; color: #666;">Cerrar Sesi√≥n</button>
    </div>

    <section id="catalogo" class="container">
        <h2 class="section-title">Tendencias</h2>
        <div class="grid-container" id="productos-container">
            <p style="text-align: center; width: 100%; color: #999;">Cargando colecci√≥n...</p>
        </div>
    </section>

    <div id="cart-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close" onclick="cerrarCarrito()">&times;</span>
            <h2 style="font-family: 'Playfair Display'; margin-bottom: 20px;">Tu Bolsa</h2>
            <ul id="cart-items"></ul>
            <h3 style="margin: 20px 0;">Total: <span id="total-price">0</span>‚Ç¨</h3>
            <button onclick="realizarPedido()" class="btn-buy">Confirmar Pedido (WhatsApp)</button>
        </div>
    </div>

    <div id="login-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 300px;">
            <span class="close" onclick="cerrarLogin()">&times;</span>
            <h2 style="font-family: 'Playfair Display';">Staff Access</h2>
            <input type="password" id="adminPass" placeholder="C√≥digo de acceso" style="padding: 12px; width: 90%; margin-bottom: 15px; border: 1px solid #ccc;">
            <button onclick="verificarAdmin()" class="btn-buy">Entrar</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 PLUS STORE | Moda & Estilo</p>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script>
        // --- TUS CLAVES REALES DE PLUS STORE ---
        const firebaseConfig = {
            apiKey: "AIzaSyBFGONNSOyloukKKJeTYVRaEpFyzLSlRWw",
            authDomain: "plus-store-web.firebaseapp.com",
            projectId: "plus-store-web",
            storageBucket: "plus-store-web.firebasestorage.app",
            messagingSenderId: "918663622818",
            appId: "1:918663622818:web:a33e78f71b2314698ae7fb",
            measurementId: "G-PRVMPSW0Q1"
        };

        // Inicializar
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Variables
        let carrito = [];
        let esAdmin = false;
        const PASS_ADMIN = "4354"; 
        
        // ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è ¬°CAMBIA ESTE N√öMERO POR EL DE LA TIENDA DE ROPA! ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è
        const MI_TELEFONO = "34607396568"; 

        // --- FUNCIONES ---

        function mostrarProductos() {
            const contenedor = document.getElementById('productos-container');
            
            db.collection("productos").orderBy("fecha", "desc").get().then((querySnapshot) => {
                contenedor.innerHTML = "";
                
                if (querySnapshot.empty) {
                    contenedor.innerHTML = '<p style="text-align:center; width:100%">No hay art√≠culos en la colecci√≥n. <br>Entra como Admin para a√±adir.</p>';
                    return;
                }

                querySnapshot.forEach((doc) => {
                    const prod = doc.data();
                    const prodId = doc.id;
                    
                    const div = document.createElement('div');
                    div.className = "product-card";
                    div.innerHTML = `
                        <img src="${prod.img}" class="product-photo" alt="${prod.nombre}">
                        <div class="product-info">
                            <div class="product-name">${prod.nombre}</div>
                            <span class="price">${prod.precio}‚Ç¨</span>
                            <button class="btn-buy" onclick="agregarCarrito('${prodId}', '${prod.nombre}', ${prod.precio})">A√±adir a la bolsa</button>
                            ${esAdmin ? `<br><button class="btn-delete" onclick="eliminarProducto('${prodId}')">Eliminar del cat√°logo</button>` : ''}
                        </div>
                    `;
                    contenedor.appendChild(div);
                });
            }).catch(error => {
                console.error(error);
                contenedor.innerHTML = '<p style="text-align:center; width:100%">Error cargando. Revisa si creaste la Base de Datos en Firebase.</p>';
            });
        }

        // Carrito
        function agregarCarrito(id, nombre, precio) {
            carrito.push({ id, nombre, precio });
            actualizarCarritoUI();
            alert("‚ú® Art√≠culo a√±adido a la bolsa");
        }

        function actualizarCarritoUI() {
            document.getElementById('cart-count').innerText = carrito.length;
            const total = carrito.reduce((sum, item) => sum + item.precio, 0);
            document.getElementById('total-price').innerText = total;

            const lista = document.getElementById('cart-items');
            lista.innerHTML = "";
            carrito.forEach((item, index) => {
                lista.innerHTML += `
                    <li>
                        <span>${item.nombre}</span>
                        <span>
                            <b>${item.precio}‚Ç¨</b> 
                            <span onclick="eliminarDelCarrito(${index})" style="color:red; cursor:pointer; margin-left:10px;">‚úï</span>
                        </span>
                    </li>`;
            });
        }

        function eliminarDelCarrito(index) {
            carrito.splice(index, 1);
            actualizarCarritoUI();
        }

        function realizarPedido() {
            if(carrito.length === 0) return alert("La bolsa est√° vac√≠a");
            let msj = "üëã Hola PLUS STORE, quiero pedir estas prendas: \n\n";
            carrito.forEach(p => msj += `‚ñ™Ô∏è ${p.nombre} (${p.precio}‚Ç¨)\n`);
            msj += `\nüí∞ Total: ${document.getElementById('total-price').innerText}‚Ç¨`;
            
            // Abrir WhatsApp
            window.open(`https://wa.me/${MI_TELEFONO}?text=${encodeURIComponent(msj)}`, '_blank');
            
            carrito = [];
            actualizarCarritoUI();
            cerrarCarrito();
        }

        // Admin
        function verificarAdmin() {
            if(document.getElementById('adminPass').value === PASS_ADMIN) {
                esAdmin = true;
                document.getElementById('admin-panel').classList.remove('hidden');
                cerrarLogin();
                mostrarProductos();
                alert("üîì Acceso Concedido");
            } else {
                alert("C√≥digo incorrecto");
            }
        }

        function cerrarSesion() {
            esAdmin = false;
            document.getElementById('admin-panel').classList.add('hidden');
            mostrarProductos();
        }

        // Subir Producto (Modo Base64 para evitar errores de Storage)
        document.getElementById('addProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const file = document.getElementById('newImg').files[0];
            const name = document.getElementById('newName').value;
            const price = Number(document.getElementById('newPrice').value);

            if(!file) return alert("Falta la foto");
            if(file.size > 1000000) return alert("‚ö†Ô∏è La foto es muy grande. Usa una menor de 1MB.");

            alert("Subiendo prenda... ‚è≥");

            const reader = new FileReader();
            reader.readAsDataURL(file);
            
            reader.onload = function() {
                db.collection("productos").add({
                    nombre: name,
                    precio: price,
                    img: reader.result,
                    fecha: new Date().toISOString()
                }).then(() => {
                    alert("‚úÖ Prenda publicada con √©xito");
                    document.getElementById('addProductForm').reset();
                    mostrarProductos();
                }).catch(error => {
                    alert("Error: " + error.message);
                });
            };
        });

        function eliminarProducto(id) {
            if(confirm("¬øRetirar prenda del cat√°logo permanentemente?")) {
                db.collection("productos").doc(id).delete().then(() => mostrarProductos());
            }
        }

        // Modales
        function abrirLogin() { document.getElementById('login-modal').classList.remove('hidden'); }
        function cerrarLogin() { document.getElementById('login-modal').classList.add('hidden'); }
        function abrirCarrito() { document.getElementById('cart-modal').classList.remove('hidden'); }
        function cerrarCarrito() { document.getElementById('cart-modal').classList.add('hidden'); }

        // Iniciar
        mostrarProductos();
    </script>
</body>
</html>